syntax = "proto3";

package trade_service;

option go_package = "reef_sub_service_sol/api/trade_service/v1;v1";
option java_multiple_files = true;
option java_package = "dev.kratos.api.trade_service.v1";
option java_outer_classname = "TradeServiceProtoV1";

// 交易服务
service TradeServiceSol {
  // 订阅交易流（支持动态切换 mint 地址）
  rpc SubscribeTradeSol(stream SubscribeTradeRequestSol) returns (stream TradeResponseSol);
  // 订阅最新交易流（所有代币）
  rpc SubscribeLatestTrade(SubscribeLatestTradeRequest) returns (stream TradeResponseSol);
}

// 订阅交易请求
message SubscribeTradeRequestSol {
  // 代币 mint 地址
  string mint_address = 1;
}

// 订阅最新交易请求（空请求）
message SubscribeLatestTradeRequest {
  // 可以预留字段用于后续扩展
}

// 交易响应
message TradeResponseSol {
  // 交易签名
  string signature = 1;
  // 用户地址
  string user_address = 2;
  // 输入代币 mint 地址
  string input_mint = 3;
  // 输出代币 mint 地址
  string output_mint = 4;
  // 输入数量
  uint64 input_amount = 5;
  // 输出数量
  uint64 output_amount = 6;
  // 交易类型 (买入/卖出)
  string trade_type = 7;
  // 时间戳
  int64 timestamp = 8;
  // 池地址
  string pool_address = 9;
}